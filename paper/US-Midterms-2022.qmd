---
title: "Abortion is More Popular than Your Favorite Politician"
subtitle: "My subtitle if needed"
author: 
  - Talia Fabregas
thanks: "Code and data are available at: [https://github.com/taliafabs/US-Midterms-2022.git](https://github.com/taliafabs/US-Midterms-2022.git)."
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| echo: false
#| warning: false
#| message: false

library(tidyverse)
library(janitor)
library(dplyr)
library(ggplot2)
library(arrow)
library(rstanarm)
library(modelsummary)
library(kableExtra)
library(RColorBrewer)

# load the analysis data
setwd(here::here())
analysis_data <- read_parquet("data/02-analysis_data/ces2022_analysis_data.parquet")
```


# Introduction

Overview paragraph
Goal is learn why those who voted Democrat at the top of the ticket are more likely to vote down-ballot than those who voted Republican at the top of the ticket.

Estimand paragraph

Results paragraph

Why it matters paragraph
In the 2024 election, Democratic Senate candidates (both incumbent and non-incumbent) were elected in states that President-Elect Trump carried: Michigan, Wisconsin, Nevada, and Arizona. In Nevada and Wisconsin, Senators Jackie Rosen and Tammy Baldwin 

Telegraphing paragraph: The remainder of this paper is structured as follows. @sec-data....






# Data {#sec-data}

## Overview

We use the statistical programming language R [@citeR].... Our data [@ces2022].... Following @tswd, we consider...

Overview text

## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Outcome variables

Add graphs, tables and text. Use sub-sub-headings for each outcome variable or update the subheading to be singular.



Some of our data is of penguins (@fig-fig1), from ...

```{r}
#| label: fig-fig1
#| fig-cap: Figure 1!!!
#| echo: false
#| warning: false
#| message: false
  
```

Talk more about it.


Talk way more about it. 

## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.




# Model

The goal of my modeling strategy is twofold. Firstly, I want to
The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i | \pi_i &\sim \mbox{Bern}(\pi_i) \\
\mbox{logit}(\pi_i) &= \beta_0 + \beta_1 \times presvote2020_i + \beta_2 \times educ_i + \beta_3 \times trust_i + \beta_4 \times know\_us\_house_i \\
&+ \beta_5 \times know\_us\_senate_i + \beta_6 \times political\_interest_i  \\
\beta_0 &\sim ~ \mbox{Normal}(0, 2.5) \\
\beta_1 &\sim ~ \mbox{Normal}(0, 2.5) \\
\beta_2 &\sim ~ \mbox{Normal}(0, 2.5) \\
\beta_3 &\sim ~ \mbox{Normal}(0, 2.5) \\
\beta_4 &\sim ~ \mbox{Normal}(0, 2.5) \\
\beta_5 &\sim ~ \mbox{Normal}(0, 2.5) \\
\beta_6 &\sim ~ \mbox{Normal}(0, 2.5) \\
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.

## Model Weaknesses and Limitations
Trained using a random subset of the data. Refer to codebook about the risks of that. 


# Results

The results are summarized in [Appendix -@sec-model-results]. 

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(rstanarm)

turnout_model_2022 <-
  readRDS(file = here::here("models/turnout_model_2022.rds"))
```





# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}

# Surveys, Sampling, and Observational Data

## Deep Dive into CES Methodology

### Sampling Method

### Weighting

### Verification

### Weaknesses and Limitations

## Second Point: Idealized Survey Methodology to Study 2024 Down-Ballot Voter Attrition

## Social Desirability Bias and Identifying Non-Voters

# Additional data details

## Data cleaning

# Model details {#sec-model-details}

## Model Results {#sec-model-results}
The model summary is shown in @tbl-model-summary.
```{r}
#| echo: false
#| eval: true
#| label: tbl-model-summary
#| tbl-cap: "Explanatory model of voter turnout in 2022 U.S. midterm elections based on ..."
#| warning: false

modelsummary::modelsummary(
  list(
    "Voter Turnout Model" = turnout_model_2022
  ),
  statistic = "mad",
  fmt = 2,
  output = "kableExtra"
) %>%
  kableExtra::kable_styling(font_size = 11)
```

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows the comparison of the outcome variable $vote\_2022$, with simulations from the posterior distribution [@tswd].

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]

# pp_check(turnout_model_2022) +
#   theme_classic() +
#   theme(legend.position = "bottom")
# 
# posterior_vs_prior(turnout_model_2022) +
#   theme_minimal() +
#   scale_color_brewer(palette = "Set1") +
#   theme(legend.position = "bottom") +
#   coord_flip()
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

plot(turnout_model_2022, "trace")

plot(turnout_model_2022, "rhat")
```



\newpage


# References


